
CODE SEGMENT
ASSUME CS : CODE , DS : CODE , ES  : CODE , SS : CODE

PPI EQU 26H
CPORT EQU  24H
BPORT EQU 22H
APORT EQU 20H

ORG 1000H

;IF YOU IN FLOOR 4 , PRESS B1 => GO TO FLOOR 1

MOV AL , 90H
OUT PPI , AL

AGAIN :
IN AL, APORT
CMP AL , 8EH    ; IF YOU IN FLOOR 4 & PRESS 1
JNE AGAIN

MOV AL , 0F9H
OUT CPORT , AL


REPEAT :
IN AL , APORT
AND AL , 0F0H
CMP AL , 40H
JE IN_3
CONT1 :
IN AL , APORT
AND AL , 0F0H
CMP AL , 20H
JE IN_2
CONT2:
IN AL , APORT
AND AL , 0F0H
CMP AL , 10H
JE STOP
JMP REPEAT


STOP :
      MOV AL , 0EFH
      OUT CPORT , AL
      MOV AL , 0F9H
      OUT BPORT , AL
      JMP EXIT
      

 IN_3 :
      MOV AL , 0B9H
      OUT CPORT , AL
      MOV AL , 0B0H
      OUT BPORT , AL
      JMP CONT1
      
  IN_2 :
      MOV AL , 0D9H
      OUT CPORT , AL
      MOV AL , 0A4H
      OUT BPORT , AL
      JMP CONT2
      
      EXIT :
      
      INT 3;
      CODE ENDS
      END
